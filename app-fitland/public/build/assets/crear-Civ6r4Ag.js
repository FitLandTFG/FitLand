import{m as u,j as r}from"./app-CV7uQCN8.js";import{d as s,u as b}from"./utc-kuHnJr46.js";import"./es-_mmWfbfR.js";s.locale("es");s.extend(b);const v=({usuarios:t,clases:l})=>{const{data:i,setData:c,post:m,processing:p,errors:o}=u({usuario_id:"",nombre_clase:"",clase_id:"",fecha_inscripcion:""}),d=o.general,x=e=>{e.preventDefault(),m("/admin/inscripciones")};return r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Registrar Inscripción"}),d&&r.jsx("div",{className:"mb-4 px-4 py-2 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),r.jsxs("form",{onSubmit:x,className:"space-y-4 max-w-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Usuario"}),r.jsxs("select",{value:i.usuario_id,onChange:e=>c("usuario_id",e.target.value),className:"w-full border rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"Seleccionar usuario"}),t.map(e=>r.jsx("option",{value:e.id,children:e.nombre_completo},e.id))]}),o.usuario_id&&r.jsx("p",{className:"text-red-600 text-sm",children:o.usuario_id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Clase"}),r.jsxs("select",{value:i.nombre_clase,onChange:e=>{c("nombre_clase",e.target.value),c("clase_id",""),c("fecha_inscripcion","")},className:"w-full border rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"Seleccionar clase"}),[...new Set(l.map(e=>e.nombre))].map((e,a)=>r.jsx("option",{value:e,children:e},a))]}),o.nombre_clase&&r.jsx("p",{className:"text-red-600 text-sm",children:o.nombre_clase})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Fecha de Inscripción"}),r.jsxs("select",{value:i.fecha_inscripcion,onChange:e=>{const a=l.find(n=>n.nombre===i.nombre_clase&&s(n.horario).format("YYYY-MM-DD HH:mm:ss")===e.target.value);a&&(c("clase_id",a.id),c("fecha_inscripcion",s(a.horario).format("YYYY-MM-DD HH:mm:ss")))},className:"w-full border rounded px-3 py-2",disabled:!i.nombre_clase,children:[r.jsx("option",{value:"",children:i.nombre_clase?"Seleccionar horario":"Seleccione una clase primero"}),i.nombre_clase&&l.filter(e=>e.nombre===i.nombre_clase&&s(e.horario).isAfter(s())).sort((e,a)=>s.utc(e.horario).unix()-s.utc(a.horario).unix()).map(e=>{const a=s(e.horario).format("YYYY-MM-DD HH:mm:ss"),n=s(e.horario).format("dddd, DD MMMM YYYY - HH:mm"),h=n.charAt(0).toUpperCase()+n.slice(1);return r.jsx("option",{value:a,children:h},e.id)})]}),o.fecha_inscripcion&&r.jsx("p",{className:"text-red-600 text-sm",children:o.fecha_inscripcion})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Registrar inscripción"}),r.jsx("a",{href:"/admin/inscripciones",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{v as default};
