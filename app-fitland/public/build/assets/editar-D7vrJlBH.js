import{m as j,j as r}from"./app-CV7uQCN8.js";import{d as s,u as v}from"./utc-kuHnJr46.js";import"./es-_mmWfbfR.js";s.locale("es");s.extend(v);const N=({inscripcion:i,usuarios:b,clases:d})=>{var x;const t=d.find(e=>e.id===i.clase_id),p=(t==null?void 0:t.nombre)??"",{data:o,setData:l,put:h,processing:u,errors:n}=j({usuario_id:i.usuario_id,nombre_clase:p,clase_id:i.clase_id,fecha_inscripcion:s(i.fecha_inscripcion).format("YYYY-MM-DD HH:mm:ss")}),m=n.general,f=e=>{e.preventDefault(),h(`/admin/inscripciones/${i.id}`)};return r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Editar Inscripción"}),m&&r.jsx("div",{className:"mb-4 px-4 py-2 bg-red-100 border border-red-400 text-red-700 rounded",children:m}),r.jsxs("form",{onSubmit:f,className:"space-y-4 max-w-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Usuario"}),r.jsx("input",{type:"text",value:((x=b.find(e=>e.id===o.usuario_id))==null?void 0:x.nombre_completo)||"",readOnly:!0,className:"w-full border rounded px-3 py-2 bg-gray-100 cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Clase"}),r.jsxs("select",{value:o.nombre_clase,onChange:e=>{l("nombre_clase",e.target.value),l("clase_id",""),l("fecha_inscripcion","")},className:"w-full border rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"Seleccionar clase"}),[...new Set(d.map(e=>e.nombre))].map((e,a)=>r.jsx("option",{value:e,children:e},a))]}),n.nombre_clase&&r.jsx("p",{className:"text-red-600 text-sm",children:n.nombre_clase})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-semibold",children:"Horario"}),r.jsxs("select",{value:o.fecha_inscripcion,onChange:e=>{const a=d.find(c=>c.nombre===o.nombre_clase&&s(c.horario).format("YYYY-MM-DD HH:mm:ss")===e.target.value);a&&(l("clase_id",a.id),l("fecha_inscripcion",s(a.horario).format("YYYY-MM-DD HH:mm:ss")))},className:"w-full border rounded px-3 py-2",disabled:!o.nombre_clase,children:[r.jsx("option",{value:"",children:o.nombre_clase?"Seleccionar horario":"Seleccione una clase primero"}),o.nombre_clase&&d.filter(e=>e.nombre===o.nombre_clase).sort((e,a)=>s(e.horario).unix()-s(a.horario).unix()).map(e=>{const a=s(e.horario).format("YYYY-MM-DD HH:mm:ss"),c=s(e.horario).format("dddd, DD MMMM YYYY - HH:mm"),_=c.charAt(0).toUpperCase()+c.slice(1);return r.jsx("option",{value:a,children:_},e.id)})]}),n.fecha_inscripcion&&r.jsx("p",{className:"text-red-600 text-sm",children:n.fecha_inscripcion})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50",children:"Actualizar inscripción"}),r.jsx("a",{href:"/admin/inscripciones",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{N as default};
