import{m as p,r as x,j as e}from"./app-CV7uQCN8.js";const h=({usuarios:d,planes:c})=>{const{data:a,setData:l,post:o,processing:t,errors:n}=p({usuario_id:"",plan_id:"",precio:"",fecha_inicio:"",fecha_fin:"",estado:"activa"});x.useEffect(()=>{const i=c.find(r=>r.id===Number(a.plan_id));if(i&&(l("precio",i.precio.toFixed(2)),a.fecha_inicio)){const r=new Date(a.fecha_inicio),s=new Date(r);i.duracion_dias>=360?s.setFullYear(s.getFullYear()+1):i.duracion_dias>=28?s.setMonth(s.getMonth()+1):s.setDate(s.getDate()+i.duracion_dias),l("fecha_fin",s.toISOString().split("T")[0])}},[a.plan_id,a.fecha_inicio,c,l]);const u=i=>{i.preventDefault(),o("/admin/suscripciones")};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Crear Suscripción"}),e.jsxs("form",{onSubmit:u,className:"space-y-4 max-w-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Usuario"}),e.jsxs("select",{value:a.usuario_id,onChange:i=>l("usuario_id",i.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Selecciona un usuario"}),d.map(i=>e.jsx("option",{value:i.id,children:i.nombre_completo},i.id))]}),n.usuario_id&&e.jsx("p",{className:"text-red-600 text-sm",children:n.usuario_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Plan"}),e.jsxs("select",{value:a.plan_id,onChange:i=>l("plan_id",i.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Selecciona un plan"}),c.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]}),n.plan_id&&e.jsx("p",{className:"text-red-600 text-sm",children:n.plan_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Precio"}),e.jsx("input",{type:"number",value:a.precio,disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100 text-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Fecha de inicio"}),e.jsx("input",{type:"date",value:a.fecha_inicio,onChange:i=>l("fecha_inicio",i.target.value),className:"w-full border rounded px-3 py-2"}),n.fecha_inicio&&e.jsx("p",{className:"text-red-600 text-sm",children:n.fecha_inicio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Fecha de fin"}),e.jsx("input",{type:"date",value:a.fecha_fin,disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100 text-gray-700"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Crear suscripción"}),e.jsx("a",{href:"/admin/suscripciones",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{h as default};
