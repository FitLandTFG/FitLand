import{m as u,r as p,j as e}from"./app-CV7uQCN8.js";const f=({suscripcion:l,usuarios:o,planes:c})=>{var r;const{data:i,setData:d,put:x,processing:m,errors:s}=u({usuario_id:l.usuario_id,plan_id:l.plan_id,precio:((r=l.precio)==null?void 0:r.toString())??"0",fecha_inicio:l.fecha_inicio,fecha_fin:l.fecha_fin,estado:l.estado});p.useEffect(()=>{const a=c.find(n=>n.id===Number(i.plan_id));if(a&&(d("precio",a.precio.toFixed(2)),i.fecha_inicio&&/^\d{4}-\d{2}-\d{2}$/.test(i.fecha_inicio))){const n=new Date(i.fecha_inicio),t=new Date(n);a.duracion_dias>=360?t.setFullYear(t.getFullYear()+1):a.duracion_dias>=28?t.setMonth(t.getMonth()+1):t.setDate(t.getDate()+a.duracion_dias),d("fecha_fin",t.toISOString().split("T")[0])}},[i.plan_id,i.fecha_inicio,c,d]);const h=a=>{a.preventDefault(),x(`/admin/suscripciones/${l.id}`)};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Editar Suscripción"}),e.jsxs("form",{onSubmit:h,className:"space-y-4 max-w-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Usuario"}),e.jsx("select",{value:i.usuario_id,onChange:a=>d("usuario_id",Number(a.target.value)),className:"w-full border rounded px-3 py-2",children:o.map(a=>e.jsx("option",{value:a.id,children:a.nombre_completo},a.id))}),s.usuario_id&&e.jsx("p",{className:"text-red-600 text-sm",children:s.usuario_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Plan"}),e.jsx("select",{value:i.plan_id,onChange:a=>d("plan_id",Number(a.target.value)),className:"w-full border rounded px-3 py-2",children:c.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))}),s.plan_id&&e.jsx("p",{className:"text-red-600 text-sm",children:s.plan_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Precio"}),e.jsx("input",{type:"number",value:i.precio,disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100 text-gray-700"}),s.precio&&e.jsx("p",{className:"text-red-600 text-sm",children:s.precio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Fecha de inicio"}),e.jsx("input",{type:"date",value:i.fecha_inicio,onChange:a=>d("fecha_inicio",a.target.value),className:"w-full border rounded px-3 py-2"}),s.fecha_inicio&&e.jsx("p",{className:"text-red-600 text-sm",children:s.fecha_inicio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Fecha de fin"}),e.jsx("input",{type:"date",value:i.fecha_fin,disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100 text-gray-700"}),s.fecha_fin&&e.jsx("p",{className:"text-red-600 text-sm",children:s.fecha_fin})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Estado"}),e.jsxs("select",{value:i.estado,onChange:a=>d("estado",a.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"activa",children:"Activa"}),e.jsx("option",{value:"expirada",children:"Expirada"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]}),s.estado&&e.jsx("p",{className:"text-red-600 text-sm",children:s.estado})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50",children:"Actualizar suscripción"}),e.jsx("a",{href:"/admin/suscripciones",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{f as default};
