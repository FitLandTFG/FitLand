import{K as h,r as f,j as e,L as j}from"./app-CV7uQCN8.js";import{A as N}from"./app-layout-DW-QwsIP.js";import"./navbar-B6tlJW2d.js";function S(){const{planes:i,tieneSuscripcionActiva:c,auth:d}=h().props,m=d.user,[u,n]=f.useState(!1),p=[{label:"Acceso ilimitado al gimnasio",tipos:["Prueba","Silver","Gold","Diamond"]},{label:"Inscripción ilimitada a clases",tipos:["Gold","Diamond"]},{label:"Mochila de regalo",tipos:["Gold","Diamond"]},{label:"10% descuento en tienda",tipos:["Diamond"]},{label:"Invitar a un amigo sin límites",tipos:["Diamond"]}],x=()=>e.jsx("span",{className:"text-green-600 font-bold text-xl",children:"✔"}),b=()=>e.jsx("span",{className:"text-red-500 font-bold text-xl",children:"✘"}),g={Prueba:"Con este plan de prueba gratuito, podrás acceder al gimnasio sin límites durante 30 días. Es ideal para probar nuestras instalaciones antes de contratar un plan completo. Solo puede usarse una vez y sin haber contratado otra suscripción antes.",Silver:"El plan más económico. Incluye acceso ilimitado al gimnasio durante el periodo contratado. No permite inscribirse a ninguna de las clases.",Gold:"Incluye todo lo del plan Silver, además de inscripción ilimitada a cualquier clase del gimnasio y una mochila de deportiva de FitLand de regalo.",Diamond:"Incluye todos los beneficios del plan Gold. Además, obtienes un 10% de descuento en todos los productos de la tienda y puedes invitar a una persona a entrenar contigo sin límites presentando ambos DNI en recepción."},l=async a=>{var r;if(!m){window.location.href="/login";return}if(c){n(!0);return}try{const s=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");localStorage.removeItem("carrito"),localStorage.setItem("plan_id",a.toString());const o=await(await fetch("/pago/crear-sesion",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s??""},body:JSON.stringify({suscripcion:!0,plan_id:a})})).json();o.url?window.location.href=o.url:alert("No se pudo iniciar el pago.")}catch(s){console.error("Error en la suscripción:",s),alert("Error inesperado al procesar la suscripción.")}};return e.jsxs(N,{children:[e.jsx(j,{title:"Planes de Suscripción"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-black",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Planes de Suscripción"}),e.jsx("p",{className:"text-lg text-center text-gray-700 mb-12",children:"Disfruta de cualquier suscripción sin ningún tipo de permanencia ni pago automático, evitando que pagues de más."}),e.jsx("div",{className:"overflow-x-auto mb-12",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-lg font-semibold p-4 border-b"}),i.map(a=>e.jsx("th",{className:"text-center text-lg font-semibold p-4 border-b",children:a.nombre},a.id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("td",{className:"text-left font-medium p-4",children:"Duración"}),i.map(a=>e.jsx("td",{className:"text-center p-4",children:a.duracion_dias===365?"1 año":a.duracion_dias===30?"1 mes":`${Math.round(a.duracion_dias/30)} meses`},a.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-left font-medium p-4 bg-gray-100",children:"Precio"}),i.map(a=>e.jsx("td",{className:"text-center p-4 bg-gray-100",children:a.precio===0?"Gratis":`${a.precio.toFixed(2)} €`},a.id))]}),p.map((a,r)=>e.jsxs("tr",{className:r%2===0?"bg-white":"bg-gray-100",children:[e.jsx("td",{className:"text-left font-medium p-4",children:a.label}),i.map(s=>e.jsx("td",{className:"text-center p-4",children:a.tipos.includes(s.tipo)?x():b()},s.id))]},r))]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-10 mt-12",children:["Prueba","Silver","Gold","Diamond"].map(a=>{const r=i.find(t=>t.tipo===a&&t.duracion_dias===30),s=i.find(t=>t.tipo===a&&t.duracion_dias===365);return r?e.jsxs("div",{className:"flex flex-col md:flex-row items-center bg-white shadow-lg rounded-xl p-6 border border-gray-200",children:[e.jsx("div",{className:"w-full md:w-1/4 mb-6 md:mb-0 md:mr-8",children:e.jsx("img",{src:`/images/Planes suscripciones/${a}.png`,alt:`Imagen del plan ${a}`,className:"w-full h-auto object-cover"})}),e.jsxs("div",{className:"w-full md:w-3/4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:a==="Prueba"?"Plan de prueba":`Suscripción ${a}`}),e.jsx("p",{className:"text-lg leading-relaxed text-gray-800 mb-4",children:g[a]}),e.jsx("div",{className:"text-gray-700 font-medium text-base mb-6",children:a==="Prueba"?e.jsx("span",{children:"30 días de prueba gratuitos"}):e.jsxs(e.Fragment,{children:[r&&e.jsxs("p",{children:["Mensual: ",r.precio.toFixed(2)," €"]}),s&&e.jsxs("p",{children:["Anual: ",s.precio.toFixed(2)," €"]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded transition duration-200 cursor-pointer",onClick:()=>l(r.id),children:a==="Prueba"?"Obtener plan de prueba":"Suscripción mensual"}),a!=="Prueba"&&s&&e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded transition duration-200 cursor-pointer",onClick:()=>l(s.id),children:"Suscripción anual"})]})]})]},a):null})})]}),u&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md text-center shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ya tienes una suscripción activa"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Para adquirir una nueva suscripción, primero debes cancelar la actual."}),e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:"Cerrar"})]})})]})}export{S as default};
