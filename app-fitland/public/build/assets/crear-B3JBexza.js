import{m as g,j as e}from"./app-CV7uQCN8.js";const N=u=>{var i;const{usuarios:p,productos:m,flash:t}=u,{data:o,setData:c,post:x,processing:h,errors:d}=g({usuario_id:"",fecha_compra:"",productos:[{id:"",cantidad:1}]}),b=()=>{c("productos",[...o.productos,{id:"",cantidad:1}])},j=s=>{const a=[...o.productos];a.splice(s,1),c("productos",a)},n=(s,a,r)=>{const l=[...o.productos];a==="id"?l[s].id=r:a==="cantidad"&&(l[s].cantidad=parseInt(r)),c("productos",l)},v=s=>{s.preventDefault(),x("/admin/compras")};return console.log("flash",t),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Registrar Compra"}),(t==null?void 0:t.error)&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:t.error}),e.jsxs("form",{onSubmit:v,className:"space-y-4 max-w-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Usuario"}),e.jsxs("select",{value:o.usuario_id,onChange:s=>c("usuario_id",s.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Seleccionar usuario"}),p.map(s=>e.jsx("option",{value:s.id,children:s.nombre_completo},s.id))]}),d.usuario_id&&e.jsx("p",{className:"text-red-600 text-sm",children:d.usuario_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Fecha de Compra"}),e.jsx("input",{type:"datetime-local",value:(i=o.fecha_compra)==null?void 0:i.slice(0,16),onChange:s=>c("fecha_compra",s.target.value),className:"w-full border rounded px-3 py-2"}),d.fecha_compra&&e.jsx("p",{className:"text-red-600 text-sm",children:d.fecha_compra})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold",children:"Productos"}),o.productos.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:s.id,onChange:r=>n(a,"id",r.target.value),className:"flex-1 border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Seleccionar producto"}),m.map(r=>e.jsx("option",{value:r.id,children:r.nombre},r.id))]}),e.jsx("input",{type:"number",min:1,value:s.cantidad,onChange:r=>n(a,"cantidad",r.target.value),className:"w-24 border rounded px-3 py-2",placeholder:"Cantidad"}),e.jsx("button",{type:"button",onClick:()=>j(a),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"×"})]},a)),d.productos&&e.jsx("p",{className:"text-red-600 text-sm",children:d.productos}),e.jsx("button",{type:"button",onClick:b,className:"mt-2 text-sm text-blue-600 hover:underline",children:"+ Añadir otro producto"})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Registrar compra"}),e.jsx("a",{href:"/admin/compras",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{N as default};
