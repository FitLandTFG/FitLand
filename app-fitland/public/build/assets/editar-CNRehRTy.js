import{m as b,r as n,j as e}from"./app-CV7uQCN8.js";const g=({pago:l,compras:c})=>{const{data:s,setData:t,put:m,processing:p,errors:o}=b({compra_id:l.compra_id,fecha_pago:l.fecha_pago,metodo_pago:l.metodo_pago,transaccion_id:l.transaccion_id??"",estado:l.estado}),[x,r]=n.useState(0);n.useEffect(()=>{const a=c.find(d=>d.id===Number(s.compra_id));if(a){const d=a.productos.reduce((h,i)=>h+i.precio*i.pivot.cantidad,0);r(d)}else r(0)},[s.compra_id,c]);const u=a=>{a.preventDefault(),m(`/admin/pagos/${l.id}`)};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Editar Pago"}),e.jsxs("form",{onSubmit:u,className:"space-y-4 max-w-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Compra"}),e.jsxs("select",{value:s.compra_id,onChange:a=>t("compra_id",Number(a.target.value)),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Seleccionar compra"}),c.map(a=>{var d;return e.jsxs("option",{value:a.id,children:["#",a.id," - ",a.fecha_compra," - ",(d=a.usuario)==null?void 0:d.nombre_completo]},a.id)})]}),o.compra_id&&e.jsx("p",{className:"text-red-600 text-sm",children:o.compra_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Monto calculado (€)"}),e.jsx("input",{type:"number",readOnly:!0,value:x,className:"w-full border rounded px-3 py-2 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Fecha de Pago"}),e.jsx("input",{type:"datetime-local",value:s.fecha_pago.slice(0,16),onChange:a=>t("fecha_pago",a.target.value),className:"w-full border rounded px-3 py-2"}),o.fecha_pago&&e.jsx("p",{className:"text-red-600 text-sm",children:o.fecha_pago})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Método de Pago"}),e.jsx("input",{type:"text",value:s.metodo_pago,onChange:a=>t("metodo_pago",a.target.value),className:"w-full border rounded px-3 py-2"}),o.metodo_pago&&e.jsx("p",{className:"text-red-600 text-sm",children:o.metodo_pago})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"ID de Transacción (opcional)"}),e.jsx("input",{type:"text",value:s.transaccion_id,onChange:a=>t("transaccion_id",a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Estado"}),e.jsxs("select",{value:s.estado,onChange:a=>t("estado",a.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"fallido",children:"Fallido"})]}),o.estado&&e.jsx("p",{className:"text-red-600 text-sm",children:o.estado})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50",children:"Actualizar pago"}),e.jsx("a",{href:"/admin/pagos",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]})]})]})};export{g as default};
