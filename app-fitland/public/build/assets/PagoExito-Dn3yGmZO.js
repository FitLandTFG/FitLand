import{r as l,j as e}from"./app-CV7uQCN8.js";import{A as p}from"./app-layout-DW-QwsIP.js";import{c as d}from"./createLucideIcon-CbpJX9Ck.js";import"./navbar-B6tlJW2d.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],g=d("CircleCheckBig",m);function S(){return l.useEffect(()=>{(async()=>{var c;const a=(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"),t=localStorage.getItem("carrito"),r=localStorage.getItem("plan_id");if(!t&&!r){console.warn("Faltan datos en localStorage");return}try{if(t&&JSON.parse(t).length>0){const o=JSON.parse(t),i={compra_id:(await(await fetch("/compras/crear-desde-carrito",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a??""},body:JSON.stringify({carrito:o})})).json()).compra_id,metodo_pago:"Tarjeta - Vía Online",estado:"completado",transaccion_id:null};await fetch("/pagos/registrar",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a??""},body:JSON.stringify(i)})}if(r){const s={suscripcion_id:(await(await fetch("/suscripciones/crear-desde-frontend",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a??""},body:JSON.stringify({plan_id:parseInt(r)})})).json()).suscripcion_id,metodo_pago:"Tarjeta - Vía Online",estado:"completado",transaccion_id:null};await fetch("/pagos/registrar",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a??""},body:JSON.stringify(s)})}localStorage.removeItem("monto_total"),localStorage.removeItem("plan_id"),t&&(localStorage.removeItem("carrito"),window.dispatchEvent(new Event("carritoActualizado")))}catch(o){console.error("Error al registrar el pago:",o)}})()},[]),e.jsx(p,{children:e.jsxs("div",{className:"min-h-[calc(100vh-80px)] flex flex-col items-center justify-center px-4 text-center bg-white",children:[e.jsx(g,{size:64,className:"text-green-500 mb-4"}),e.jsx("h1",{className:"text-3xl font-extrabold text-green-600 mb-2",children:"¡Pago realizado con éxito!"}),e.jsx("p",{className:"text-gray-700 text-lg mb-6",children:"Gracias por tu compra. Puedes descargar la factura con los detalles de la compra."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx("a",{href:"/",className:"bg-[#41A510] hover:bg-green-700 text-white font-semibold px-6 py-2 rounded transition",children:"Volver a FitLand"}),e.jsx("a",{href:"/factura/pdf",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-400 text-black font-semibold px-6 py-2 rounded transition",children:"Descargar Factura"})]})]})})}export{S as default};
